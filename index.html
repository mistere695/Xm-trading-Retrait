<!-- index.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Retrait dâ€™investissement</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: 'Montserrat', Arial, sans-serif;
      background-color: #f5f5f5;
      color: #333;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }
    header.site-header {
      background-color: #000;
      color: #fff;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .container {
      flex: 1;
      max-width: 700px;
      margin: 20px auto;
      background: #fff;
      padding: 25px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
    }
    label { display:block; margin-bottom:5px; font-weight:500; }
    input, select {
      width:100%;
      padding:10px;
      margin-bottom:15px;
      border:1px solid #ccc;
      border-radius:4px;
      font-size:1rem;
    }
    button, input[type=submit] {
      background:#007bff;
      color:#fff;
      border:none;
      padding:12px;
      border-radius:4px;
      cursor:pointer;
    }
    .phone-prefix { position:relative; }
    .phone-prefix span {
      position:absolute;
      left:10px;
      top:50%;
      transform:translateY(-50%);
    }
    .phone-prefix input { padding-left:60px; }

    .notif-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1100;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .notif {
      background: rgba(0,0,0,.85);
      color:#fff;
      padding:12px 18px;
      border-radius:6px;
      animation: notifFade 3s ease forwards;
    }
    @keyframes notifFade {
      0% { opacity:0; transform:translateY(20px); }
      10% { opacity:1; transform:translateY(0); }
      80% { opacity:1; }
      100% { opacity:0; transform:translateY(-20px); }
    }
  </style>
</head>

<body>

<header class="site-header">
  <h1>XM-Trading Retrait</h1>
</header>

<div class="container">
  <form id="withdrawal-form">

    <label>Pays</label>
    <select id="country" required>
      <option value="">SÃ©lectionnez votre pays</option>
    </select>

    <label>TÃ©lÃ©phone</label>
    <div class="phone-prefix">
      <span id="phone-prefix">+XXX</span>
      <input type="tel" id="phone" required>
    </div>

    <input type="submit" value="Valider">
  </form>
</div>

<div class="notif-container" id="notifContainer"></div>

<script>
  const countryDialCodes = [
    { name:"Cameroun", code:"CM", dial_code:"+237", phone_length:9 },
    { name:"Nigeria", code:"NG", dial_code:"+234", phone_length:10 },
    { name:"Ghana", code:"GH", dial_code:"+233", phone_length:9 }
  ];

  document.addEventListener('DOMContentLoaded', () => {

    const countrySelect = document.getElementById('country');
    const phonePrefix = document.getElementById('phone-prefix');
    const phoneInput = document.getElementById('phone');

    countryDialCodes.forEach(c => {
      const o = document.createElement('option');
      o.value = c.code;
      o.textContent = c.name;
      o.dataset.dial = c.dial_code;
      o.dataset.len = c.phone_length;
      countrySelect.appendChild(o);
    });

    countrySelect.addEventListener('change', () => {
      const sel = countrySelect.selectedOptions[0];
      if (sel) {
        phonePrefix.textContent = sel.dataset.dial;
        phoneInput.maxLength = sel.dataset.len;
      }
    });

    /* âœ… CORRECTION BUG SELECT iOS */
    let ambientStarted = false;

    function safeStartAmbientNotifications() {
      if (!ambientStarted) {
        ambientStarted = true;
        startAmbientNotifications();
      }
    }

    document.addEventListener('touchstart', safeStartAmbientNotifications, { once: true });
    document.addEventListener('click', safeStartAmbientNotifications, { once: true });
  });

  function startAmbientNotifications() {
    const notifContainer = document.getElementById('notifContainer');
    setInterval(() => {
      const n = document.createElement('div');
      n.className = 'notif';
      n.textContent = 'ðŸŽ‰ Un utilisateur vient de retirer des fonds';
      notifContainer.appendChild(n);
      setTimeout(() => n.remove(), 4000);
    }, 7000);
  }
</script>

</body>
</html>